@model List<Orneholm.NewsSearch.Web.Models.SrAnalyzedEpisode>
@{
    ViewData["Title"] = "Home Page";
}

<div>
    <h1>NewsSearch</h1>

    @foreach (var episode in Model)
    {
        <div class="card mb-4">
            <div style="background: url('@episode.EpisodeImageUrl') no-repeat center; background-size: cover; height: 250px;" class="card-img-top"></div>
            <div class="card-body">
                <h3 class="card-title">@episode.EpisodeTitle</h3>
                
                <p class="card-text"><small class="text-muted">@episode.PublishDateUtc.ToLongDateString() - @episode.ProgramName</small></p>

                <p class="card-text"><strong>Description:</strong> @episode.EpisodeDescription</p>
                
                <iframe class="mx-y" width="100%" height="150" src="https://sverigesradio.se/embed/episode/@episode.EpisodeId" frameborder="0"></iframe>

                <details class="card-text my-1">
                    <summary class="font-weight-bold">Transcription</summary>

                    @episode.OriginalDisplayTranscription
                </details>
                
                <p class="card-text">
                    <strong>Sentiment:</strong> @episode.TranscriptionSentiment?.ToString("P")
                </p>
                
                <p class="card-text">
                    <strong>Keyphrases:</strong>
                    @foreach (var tag in episode.TranscriptionKeyPhrases)
                    {
                        <span class="badge badge-pill badge-info">@tag</span>
                    }
                </p>
                
                <p class="card-text">
                    <strong>Enteties:</strong>
                    @foreach (var tag in episode.TranscriptionEntities)
                    {
                        <a href="?entityName=@tag.Name&entityType=@tag.Type" class="badge badge-pill badge-info">@tag.Name (@tag.Type)</a>
                    }
                </p>

                <a href="@episode.EpisodeWebUrl" class="btn btn-primary" style="width: 100%;">Read full article</a>
            </div>
        </div>
    }
</div>